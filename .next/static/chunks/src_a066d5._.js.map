{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://E%3A/nvm/src/components/cards/winnery-list.tsx"],"sourcesContent":["\"use client\";\r\nimport { Winery } from \"@/app/interfaces\";\r\nimport { useItinerary } from \"@/store/itinerary\";\r\nimport Link from \"next/link\";\r\nimport { FC } from \"react\";\r\nimport { FaWineBottle, FaDollarSign, FaMapMarkerAlt, FaWhatsapp } from \"react-icons/fa\";\r\n\r\ninterface WineryCardProps {\r\n  winery: Winery;\r\n  addToItinerary: (winery: Winery) => void;\r\n}\r\n\r\nconst WineryCard: FC<WineryCardProps> = ({ winery, addToItinerary }) => {\r\n  const { itinerary } = useItinerary();\r\n  const isAdded = itinerary.find((item) => item._id === winery._id);\r\n\r\n  // Get WhatsApp contact if available (assumes winery.whatsapp holds the number)\r\n  const whatsappNumber = winery.contact_info.phone;\r\n  const whatsappLink = whatsappNumber ? `https://wa.me/${whatsappNumber.replace(/\\D/g, \"\")}` : \"\";\r\n\r\n  // Handle multiple tastings\r\n  const hasMultipleTastings = winery.tasting_info && winery.tasting_info.length > 1;\r\n  const tastingPrices = winery.tasting_info?.map(t => t.tasting_price) || [];\r\n  const minPrice = Math.min(...tastingPrices);\r\n  const maxPrice = Math.max(...tastingPrices);\r\n  const priceDisplay = hasMultipleTastings \r\n    ? `$${minPrice.toFixed(2)} - $${maxPrice.toFixed(2)}`\r\n    : `$${winery.tasting_info?.[0]?.tasting_price?.toFixed(2) ?? \"N/A\"}`;\r\n\r\n  // Get all wine types from all tastings\r\n  const allWineTypes = winery.tasting_info?.flatMap(t => t.wine_types) || [];\r\n  const uniqueWineTypes = [...new Set(allWineTypes)];\r\n\r\n  return (\r\n    <div className=\"flex flex-col sm:flex-row items-stretch rounded-xl bg-wine-background transition-all hover:shadow-neumorphismHover ease-in-out duration-300\">\r\n      <div className=\"w-full sm:w-1/3 h-40 sm:h-auto overflow-hidden lg:rounded-l-xl rounded-t-xl\">\r\n        <Link href={`/winery/${winery._id}`}>\r\n          {winery.tasting_info?.[0]?.images?.[0] ? (\r\n            <img\r\n              src={winery.tasting_info?.[0]?.images?.[0]}\r\n              alt={winery.name}\r\n              className=\"w-full h-full object-cover transform hover:scale-105 transition-all duration-500\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-full h-full bg-gray-300 flex items-center justify-center\">\r\n              <span className=\"text-gray-500 text-sm\">No image</span>\r\n            </div>\r\n          )}\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"p-4 sm:p-6 flex flex-col justify-between w-full sm:w-2/3 text-wine-text\">\r\n        <div className=\"mb-2\">\r\n          <Link href={`/winery/${winery._id}`}>\r\n            <h2 className=\"text-lg sm:text-xl font-serif font-semibold text-wine-primary truncate\">\r\n              {winery.name}\r\n            </h2>\r\n          </Link>\r\n          <p className=\"text-sm text-wine-secondary truncate\">{winery.description}</p>\r\n          \r\n          {/* Multiple Tasting Indicator */}\r\n          {hasMultipleTastings && (\r\n            <div className=\"mt-2\">\r\n              <span className=\"inline-block bg-wine-primary/10 text-wine-primary text-xs px-2 py-1 rounded-full\">\r\n                {winery.tasting_info.length} Tasting Options Available\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm text-neutral\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <FaMapMarkerAlt className=\"text-wine-accent\" />\r\n            <p className=\"truncate\">{winery.location.address}</p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            <FaDollarSign className=\"text-wine-accent\" />\r\n            <p>{priceDisplay}</p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2 capitalize\">\r\n            <FaWineBottle className=\"text-wine-accent\" />\r\n            <p>\r\n              {uniqueWineTypes && uniqueWineTypes.length > 0 \r\n                ? `${uniqueWineTypes.slice(0, 2).join(\", \")}${uniqueWineTypes.length > 2 ? \"...\" : \"\"}`\r\n                : \"N/A\"\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions Section */}\r\n        <div className=\"mt-4 flex flex-wrap gap-2\">\r\n          <button\r\n            disabled={!!isAdded}\r\n            className={`py-2 px-4 ${!!isAdded ? \"bg-[#bebebe]\" : \"bg-wine-primary\"} text-wine-background font-medium rounded-md ${\r\n              !isAdded && \"hover:bg-primary-focus\"\r\n            } transition-all duration-300`}\r\n            onClick={() => addToItinerary(winery)}\r\n          >\r\n            {!!isAdded ? \"Added!\" : \"Add to Itinerary\"}\r\n          </button>\r\n\r\n          {whatsappLink && (\r\n            <a\r\n              href={whatsappLink}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"py-2 px-4 bg-green-500 text-white font-medium rounded-md hover:bg-green-600 transition-all duration-300 flex items-center\"\r\n            >\r\n              <FaWhatsapp className=\"mr-2\" />\r\n              Chat\r\n            </a>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WineryCard;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file://E%3A/nvm/src/components/bottom-sheet/index.tsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  children: React.ReactNode;\r\n  anchor?: \"bottom\" | \"left\" | \"right\" | \"top\";\r\n}\r\n\r\nconst BottomSheet = ({ isOpen, onClose, children, anchor = \"bottom\" }: Props) => {\r\n  const sheetRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const anchorClasses = {\r\n    bottom: \"bottom-0 left-0 right-0 w-full rounded-t-3xl\",\r\n    top: \"top-0 left-0 right-0 w-full rounded-b-3xl\",\r\n    left: \"top-0 left-0 bottom-0 h-full w-64 rounded-r-3xl\",\r\n    right: \"top-0 right-0 bottom-0 h-full w-64 rounded-l-3xl\",\r\n  };\r\n\r\n  const translateClasses = {\r\n    bottom: \"translate-y-full\",\r\n    top: \"-translate-y-full\",\r\n    left: \"-translate-x-full\",\r\n    right: \"translate-x-full\",\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\" && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [isOpen, onClose]);\r\n\r\n  useEffect(() => {\r\n    const prevActiveElement = document.activeElement as HTMLElement;\r\n    if (isOpen && sheetRef.current) {\r\n      sheetRef.current.focus();\r\n    }\r\n    return () => {\r\n      if (prevActiveElement) {\r\n        prevActiveElement.focus();\r\n      }\r\n    };\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = isOpen ? \"hidden\" : \"\";\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const handleTouchStart = (e: TouchEvent) => {};\r\n    const handleTouchMove = (e: TouchEvent) => {};\r\n    const handleTouchEnd = (e: TouchEvent) => {};\r\n    if (sheetRef.current) {\r\n      sheetRef.current.addEventListener(\"touchstart\", handleTouchStart);\r\n      sheetRef.current.addEventListener(\"touchmove\", handleTouchMove);\r\n      sheetRef.current.addEventListener(\"touchend\", handleTouchEnd);\r\n    }\r\n    return () => {\r\n      if (sheetRef.current) {\r\n        sheetRef.current.removeEventListener(\"touchstart\", handleTouchStart);\r\n        sheetRef.current.removeEventListener(\"touchmove\", handleTouchMove);\r\n        sheetRef.current.removeEventListener(\"touchend\", handleTouchEnd);\r\n      }\r\n    };\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <>\r\n      {isOpen && <div className=\"fixed inset-0 bg-black bg-opacity-50 z-40\" onClick={onClose}></div>}\r\n      <div\r\n        ref={sheetRef}\r\n        tabIndex={-1}\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        className={`fixed ${anchorClasses[anchor]} bg-white p-6 shadow-lg z-50 transition-transform transform ${\r\n          isOpen ? \"translate-0\" : translateClasses[anchor]\r\n        }`}\r\n        style={{ transitionDuration: \"300ms\", maxHeight: \"85vh\", overflow: \"auto\" }}\r\n      >\r\n        <button className=\"absolute top-4 right-4 btn btn-sm btn-circle btn-outline\" onClick={onClose} aria-label=\"Close\">\r\n          ✕\r\n        </button>\r\n        <div className=\"h-full\">{children}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BottomSheet;\r\n"],"names":[],"mappings":";;;;AAAA;;;;AASA,MAAM,cAAc,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,QAAQ,EAAS;;IAC1E,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAyB;IAE/C,MAAM,gBAAgB;QACpB,QAAQ;QACR,KAAK;QACL,MAAM;QACN,OAAO;IACT;IAEA,MAAM,mBAAmB;QACvB,QAAQ;QACR,KAAK;QACL,MAAM;QACN,OAAO;IACT;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM;uDAAgB,CAAC;oBACrB,IAAI,EAAE,GAAG,KAAK,YAAY,QAAQ;wBAChC;oBACF;gBACF;;YACA,SAAS,gBAAgB,CAAC,WAAW;YACrC;yCAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;gCAAG;QAAC;QAAQ;KAAQ;IAEpB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM,oBAAoB,SAAS,aAAa;YAChD,IAAI,UAAU,SAAS,OAAO,EAAE;gBAC9B,SAAS,OAAO,CAAC,KAAK;YACxB;YACA;yCAAO;oBACL,IAAI,mBAAmB;wBACrB,kBAAkB,KAAK;oBACzB;gBACF;;QACF;gCAAG;QAAC;KAAO;IAEX,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,SAAS,WAAW;YACnD;yCAAO;oBACL,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;gBACjC;;QACF;gCAAG;QAAC;KAAO;IAEX,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM;0DAAmB,CAAC,KAAmB;;YAC7C,MAAM;yDAAkB,CAAC,KAAmB;;YAC5C,MAAM;wDAAiB,CAAC,KAAmB;;YAC3C,IAAI,SAAS,OAAO,EAAE;gBACpB,SAAS,OAAO,CAAC,gBAAgB,CAAC,cAAc;gBAChD,SAAS,OAAO,CAAC,gBAAgB,CAAC,aAAa;gBAC/C,SAAS,OAAO,CAAC,gBAAgB,CAAC,YAAY;YAChD;YACA;yCAAO;oBACL,IAAI,SAAS,OAAO,EAAE;wBACpB,SAAS,OAAO,CAAC,mBAAmB,CAAC,cAAc;wBACnD,SAAS,OAAO,CAAC,mBAAmB,CAAC,aAAa;wBAClD,SAAS,OAAO,CAAC,mBAAmB,CAAC,YAAY;oBACnD;gBACF;;QACF;gCAAG;QAAC;KAAO;IAEX,qBACE;;YACG,wBAAU,6LAAC;gBAAI,WAAU;gBAA4C,SAAS;;;;;;0BAC/E,6LAAC;gBACC,KAAK;gBACL,UAAU,CAAC;gBACX,MAAK;gBACL,cAAW;gBACX,WAAW,CAAC,MAAM,EAAE,aAAa,CAAC,OAAO,CAAC,4DAA4D,EACpG,SAAS,gBAAgB,gBAAgB,CAAC,OAAO,EACjD;gBACF,OAAO;oBAAE,oBAAoB;oBAAS,WAAW;oBAAQ,UAAU;gBAAO;;kCAE1E,6LAAC;wBAAO,WAAU;wBAA2D,SAAS;wBAAS,cAAW;kCAAQ;;;;;;kCAGlH,6LAAC;wBAAI,WAAU;kCAAU;;;;;;;;;;;;;;AAIjC;GApFM;KAAA;uCAsFS"}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file://E%3A/nvm/src/data/data.ts"],"sourcesContent":["export const regions = [\r\n  \"Calistoga\",\r\n  \"Diamond Mountain\",\r\n  \"St. Helena\",\r\n  \"Rutherford\",\r\n  \"Oakville\",\r\n  \"Los Carneros (Carneros)\",\r\n  \"Howell Mountain\",\r\n  \"Wild Horse Valley\",\r\n  \"Stags Leap District\",\r\n  \"Mt. Veeder\",\r\n  \"Atlas Peak\",\r\n  \"Spring Mountain District\",\r\n  \"Chiles Valley\",\r\n  \"Yountville\",\r\n  \"Oak Knoll District of Napa Valley\",\r\n  \"Coombsville\",\r\n  \"Crystal Springs of Napa Valley\",\r\n];\r\n\r\nexport const wineTypes = [\"Red\", \"Rosé\", \"White\", \"Sparkling\", \"Dessert\"];\r\n\r\nexport const specialFeatures = [\"Tasting Waived with Bottle Purchase\", \"Tour Available\", \"Food Available\", \"Family-Friendly\", \"Pet Friendly\", \"Organic\", \"Walk-ins Welcome\"];\r\n\r\nexport const timeOptions = [\"Morning\", \"Afternoon\", \"Evening\"];\r\n\r\n// Ordered AVAs (north-to-south, with mountain districts grouped)\r\nexport const avaOrder: string[] = [\r\n  \"Calistoga\",\r\n  \"Diamond Mountain\",\r\n  \"Spring Mountain District\",\r\n  \"Howell Mountain\",\r\n  \"St. Helena\",\r\n  \"Rutherford\",\r\n  \"Oakville\",\r\n  \"Yountville\",\r\n  \"Stags Leap District\",\r\n  \"Oak Knoll District of Napa Valley\",\r\n  \"Mt. Veeder\",\r\n  \"Atlas Peak\",\r\n  \"Chiles Valley\",\r\n  \"Coombsville\",\r\n  \"Wild Horse Valley\",\r\n  \"Los Carneros (Carneros)\",\r\n];\r\n\r\n// AVA information (fill in with authoritative copy from the Word document)\r\nexport const avaInfo: Record<string, string> = {\r\n  \"Calistoga\": \"Known for warm climate; bold Cabernet Sauvignon and Zinfandel.\",\r\n  \"Diamond Mountain\": \"Mountain AVA; structured Cabernet with firm tannins.\",\r\n  \"Spring Mountain District\": \"High-elevation vineyards; elegant, age-worthy reds.\",\r\n  \"Howell Mountain\": \"Cool nights; intense Cabernets with notable acidity.\",\r\n  \"St. Helena\": \"Historic heart of Napa; balanced reds and whites.\",\r\n  \"Rutherford\": \"Famous ‘Rutherford dust’; classic Cabernet terroir.\",\r\n  \"Oakville\": \"Benchmark Cabernets; gravelly alluvial fans.\",\r\n  \"Yountville\": \"Moderate climate; Merlot and Cabernet blends.\",\r\n  \"Stags Leap District\": \"Silky tannins; perfumed Cabernets.\",\r\n  \"Oak Knoll District of Napa Valley\": \"Cooler AVA; Chardonnay and Merlot shine.\",\r\n  \"Mt. Veeder\": \"Steep slopes; powerful, structured reds.\",\r\n  \"Atlas Peak\": \"High elevation; concentrated fruit and acidity.\",\r\n  \"Chiles Valley\": \"Higher, cooler; Zinfandel and Cabernet.\",\r\n  \"Coombsville\": \"Volcanic soils; elegant, cooler-climate Cabernets.\",\r\n  \"Wild Horse Valley\": \"Cool and windy; Pinot Noir and Chardonnay.\",\r\n  \"Los Carneros (Carneros)\": \"Coolest AVA; Pinot Noir and Chardonnay.\",\r\n};\r\n\r\n// Mountain AVAs for the Mountain Location filter\r\nexport const mountainAVAs: string[] = [\r\n  \"Diamond Mountain\",\r\n  \"Howell Mountain\",\r\n  \"Mt. Veeder\",\r\n  \"Atlas Peak\",\r\n  \"Spring Mountain District\",\r\n];"],"names":[],"mappings":";;;;;;;;;AAAO,MAAM,UAAU;IACrB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,YAAY;IAAC;IAAO;IAAQ;IAAS;IAAa;CAAU;AAElE,MAAM,kBAAkB;IAAC;IAAuC;IAAkB;IAAkB;IAAmB;IAAgB;IAAW;CAAmB;AAErK,MAAM,cAAc;IAAC;IAAW;IAAa;CAAU;AAGvD,MAAM,WAAqB;IAChC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAGM,MAAM,UAAkC;IAC7C,aAAa;IACb,oBAAoB;IACpB,4BAA4B;IAC5B,mBAAmB;IACnB,cAAc;IACd,cAAc;IACd,YAAY;IACZ,cAAc;IACd,uBAAuB;IACvB,qCAAqC;IACrC,cAAc;IACd,cAAc;IACd,iBAAiB;IACjB,eAAe;IACf,qBAAqB;IACrB,2BAA2B;AAC7B;AAGO,MAAM,eAAyB;IACpC;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file://E%3A/nvm/src/components/filter-bar/FilterBlock.tsx"],"sourcesContent":["import { Range } from \"react-range\";\nimport Select from \"react-select\";\nimport { wineTypes, regions, timeOptions, specialFeatures, mountainAVAs, avaOrder, avaInfo } from \"@/data/data\";\nimport React from \"react\";\nimport { FaMapMarkerAlt } from \"react-icons/fa\";\n\ntype Filters = {\n  priceRange: [number, number];\n  numberOfWines: [number, number];\n  wineType: {\n    red: boolean;\n    rosé: boolean;\n    white: boolean;\n    sparkling: boolean;\n    dessert: boolean;\n  };\n  ava: string[];\n  time: string;\n  specialFeatures: string[];\n  numberOfPeople: [number, number];\n  mountainLocation: boolean;\n};\n\ninterface FilterBlockProps {\n  filters: Filters;\n  handleFilterChange: (key: string, value: any) => void;\n  handleSpecialFeatureChange: (feature: string, checked: boolean) => void;\n  isFeaturesOpen: boolean;\n  setIsFeaturesOpen: (value: boolean) => void;\n}\n\nexport const FilterBlock = ({\n  filters,\n  handleFilterChange,\n  handleSpecialFeatureChange,\n  isFeaturesOpen,\n  setIsFeaturesOpen,\n}: FilterBlockProps) => {\n  return (\n    <>\n      {/* Total Price Range Filter */}\n      <div className=\"grid gap-4 mt-8 mb-5\">\n        <label className=\"text-sm text-gray-900 font-extrabold\">Price Range of Tasting</label>\n        <Range\n          step={10}\n          min={0}\n          max={1000}\n          values={filters.priceRange}\n          onChange={(newValues: any) => handleFilterChange(\"priceRange\", newValues)}\n          renderTrack={({ props, children }) => (\n            <div {...props} className=\"w-full h-1 bg-neutral-300 rounded-full\">{children}</div>\n          )}\n          renderThumb={({ props }) => {\n            const { key, ...thumbProps } = props as any;\n            return <div key={key} {...thumbProps} className=\"w-4 h-4 bg-primary rounded-full shadow-lg focus:outline-none\" />;\n          }}\n        />\n        <div className=\"flex justify-between text-xs\">\n          <span>${filters.priceRange[0]}</span>\n          <span>${filters.priceRange[1]}</span>\n        </div>\n      </div>\n\n      {/* Number of Wines per Tasting Filter */}\n      <div className=\"grid gap-4\">\n        <label className=\"text-sm text-gray-900 font-extrabold\">Number of Wines per Tasting</label>\n        <Range\n          step={1}\n          min={1}\n          max={10}\n          values={filters.numberOfWines}\n          onChange={(newValues) => handleFilterChange(\"numberOfWines\", newValues)}\n          renderTrack={({ props, children }) => (\n            <div {...props} className=\"w-full h-1 bg-neutral-300 rounded-full\">{children}</div>\n          )}\n          renderThumb={({ props }) => {\n            const { key, ...thumbProps } = props as any;\n            return <div key={key} {...thumbProps} className=\"w-4 h-4 bg-primary rounded-full shadow-lg focus:outline-none\" />;\n          }}\n        />\n        <div className=\"flex justify-between text-xs\">\n          <span>{filters.numberOfWines[0]} wines</span>\n          <span>{filters.numberOfWines[1]} wines</span>\n        </div>\n      </div>\n\n      {/* Number of People per Tasting Filter */}\n      <div className=\"grid gap-4 mt-4\">\n        <label className=\"text-sm text-gray-900 font-extrabold\">Number of People per Tasting</label>\n        <Range\n          step={1}\n          min={1}\n          max={20}\n          values={filters.numberOfPeople}\n          onChange={(newValues) => handleFilterChange(\"numberOfPeople\", newValues)}\n          renderTrack={({ props, children }) => (\n            <div {...props} className=\"w-full h-1 bg-neutral-300 rounded-full\">{children}</div>\n          )}\n          renderThumb={({ props }) => {\n            const { key, ...thumbProps } = props as any;\n            return <div key={key} {...thumbProps} className=\"w-4 h-4 bg-primary rounded-full shadow-lg focus:outline-none\" />;\n          }}\n        />\n        <div className=\"flex justify-between text-xs\">\n          <span>{filters.numberOfPeople[0]} people</span>\n          <span>{filters.numberOfPeople[1]} people</span>\n        </div>\n      </div>\n\n      {/* Wine Types of Tasting Filter */}\n      <div className=\"mt-4\">\n        <label className=\"text-sm text-gray-900 font-extrabold\">Wine Types of Tasting</label>\n        <div className=\"mt-2 flex flex-wrap gap-3\">\n          {wineTypes.map((type) => (\n            <label key={type} className=\"flex items-center space-x-2 text-xs sm:text-sm\">\n              <input\n                type=\"checkbox\"\n                className=\"checkbox checkbox-primary\"\n                checked={filters.wineType[type as keyof typeof filters.wineType]}\n                onChange={(e) => handleFilterChange(\"wineType\", { ...filters.wineType, [type]: e.target.checked })}\n              />\n              <span className=\"capitalize\">{type}</span>\n            </label>\n          ))}\n        </div>\n      </div>\n\n      {/* AVA Filter with info box and ordered options */}\n      <div className=\"mt-4\">\n        <label className=\"text-sm font-extrabold text-gray-900 flex items-center gap-1\">\n          American Viticultural Area (AVA)\n         <FaMapMarkerAlt style={{ color: \"#5A0C2C\" }} />\n        </label>\n        <Select\n          menuPlacement=\"top\"\n          isMulti\n          options={[...avaOrder.map((region) => ({ value: region, label: region }))]}\n          value={filters.ava.map((ava) => ({ value: ava, label: ava }))}\n          onChange={(selectedOptions) =>\n            handleFilterChange(\n              \"ava\",\n              selectedOptions.map((opt) => opt.value)\n            )\n          }\n          className=\"w-full mt-2 mb-0\"\n          classNamePrefix=\"select\"\n        />\n        {filters.ava.length > 0 && (\n          <div className=\"mt-2 p-2 rounded-md bg-base-200 text-[11px] sm:text-xs\">\n            {filters.ava.map((selected) => (\n              <div key={selected} className=\"mb-1\">\n                <strong>{selected}:</strong> {avaInfo[selected] || \"Details coming soon.\"}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Time Filter */}\n      <div style={{ marginTop: 10 }}>\n        <label className=\"text-sm text-gray-900 font-extrabold\">Preferred Time</label>\n        <select\n          value={filters.time}\n          onChange={(e) => handleFilterChange(\"time\", e.target.value)}\n          className=\"select select-bordered w-full mt-2 focus:ring-2 focus:ring-indigo-500 text-xs p-2 sm:text-sm\"\n        >\n          <option value=\"\">Select Time</option>\n          {timeOptions.map((time) => (\n            <option key={time} value={time}>\n              {time}\n            </option>\n          ))}\n        </select>\n      </div>\n\n\n      {/* Special Features Filter */}\n      <div className=\"my-10\">\n        <button\n          onClick={() => setIsFeaturesOpen(!isFeaturesOpen)}\n          className=\"flex justify-between items-center w-full text-sm font-semibold\"\n        >\n          Special Features\n          <span>{isFeaturesOpen ? \"-\" : \"+\"}</span>\n        </button>\n        {isFeaturesOpen && (\n          <div className=\"mt-2 flex flex-wrap gap-2\">\n            {specialFeatures.map((feature) => (\n              <label key={feature} className=\"flex items-center space-x-2 text-xs sm:text-sm\">\n                <input\n                  type=\"checkbox\"\n                  className=\"checkbox checkbox-primary\"\n                  checked={filters.specialFeatures.includes(feature)}\n                  onChange={(e) => handleSpecialFeatureChange(feature, e.target.checked)}\n                />\n                <span>{feature}</span>\n              </label>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Mountain Location Filter */}\n      <div className=\"mt-4\">\n        <label className=\"text-sm text-gray-900 font-extrabold\">Mountain Location</label>\n        <div className=\"mt-2\">\n          <label className=\"flex items-center space-x-2 text-xs sm:text-sm\">\n            <input\n              type=\"checkbox\"\n              className=\"checkbox checkbox-primary\"\n              checked={filters.mountainLocation}\n              onChange={(e) => handleFilterChange(\"mountainLocation\", e.target.checked)}\n            />\n            <span>Only show mountain AVAs</span>\n          </label>\n          {filters.mountainLocation && (\n            <div className=\"mt-2 text-[11px] sm:text-xs text-gray-600\">\n              Mountain AVAs: {mountainAVAs.join(\", \")}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1099, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file://E%3A/nvm/src/components/filter-bar/filter-box.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nimport { Winery } from \"@/app/interfaces\";\nimport BottomSheet from \"../bottom-sheet\";\nimport { FilterIcon } from \"lucide-react\";\nimport { MdRestore } from \"react-icons/md\";\nimport { FilterBlock } from \"./FilterBlock\";\nimport { Filters, useFilterStore } from \"@/hooks/useFilterStore\";\n\ninterface FilterProps {\n  wineries: Winery[];\n  onFilterApply: (filteredWineries: Winery[]) => void;\n}\n\nconst Filter = ({ wineries, onFilterApply }: FilterProps) => {\n  const { filters, setFilters } = useFilterStore();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [isFeaturesOpen, setIsFeaturesOpen] = useState(true);\n\n  const applyFilters = useCallback(() => {\n    setIsLoading(true);\n    let filtered = wineries;\n\n    console.log('Applying filters:', filters);\n\n    // Filter by tasting price range\n    filtered = filtered.filter((winery) => {\n      if (!winery.tasting_info || !Array.isArray(winery.tasting_info) || winery.tasting_info.length === 0) return false;\n      \n      // Check if any tasting falls within the price range\n      return winery.tasting_info.some(tasting => \n        tasting && typeof tasting.tasting_price === 'number' &&\n        tasting.tasting_price >= filters.priceRange[0] && \n        tasting.tasting_price <= filters.priceRange[1]\n      );\n    });\n\n    // Filter by tasting price specifically\n    if (filters.tastingPrice !== undefined) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || !Array.isArray(winery.tasting_info) || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting is within the tasting price range\n        return winery.tasting_info.some(tasting => \n          tasting && typeof tasting.tasting_price === 'number' &&\n          tasting.tasting_price <= filters.tastingPrice\n        );\n      });\n    }\n\n    // Filter by number of wines per tasting\n    filtered = filtered.filter((winery) => {\n      if (!winery.tasting_info || !Array.isArray(winery.tasting_info) || winery.tasting_info.length === 0) return false;\n      \n      // Check if any tasting has the required number of wines\n      return winery.tasting_info.some(tasting => {\n        if (!tasting) return false;\n        const numWines = tasting.number_of_wines_per_tasting || 1;\n        return numWines >= filters.numberOfWines[0] && numWines <= filters.numberOfWines[1];\n      });\n    });\n\n    // Filter by number of people\n    filtered = filtered.filter((winery) => {\n      if (!winery.tasting_info || !Array.isArray(winery.tasting_info) || winery.tasting_info.length === 0) return false;\n      \n      // Check if any tasting has the required number of people\n      return winery.tasting_info.some(tasting => {\n        if (!tasting || !tasting.booking_info?.number_of_people || !Array.isArray(tasting.booking_info.number_of_people)) {\n          return false;\n        }\n        \n        return tasting.booking_info.number_of_people.some(people => {\n          const numPeople = people || 1;\n          return numPeople >= filters.numberOfPeople[0] && numPeople <= filters.numberOfPeople[1];\n        });\n      });\n    });\n    // Filter by wine type\n    if (Object.values(filters.wineType).some((value) => value)) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || !Array.isArray(winery.tasting_info) || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting has the required wine types\n        return winery.tasting_info.some(tasting => {\n          if (!tasting || !tasting.wine_types || !Array.isArray(tasting.wine_types)) return false;\n          \n          // Get selected wine types\n          const selectedTypes = Object.keys(filters.wineType).filter(\n            (type) => filters.wineType[type as keyof typeof filters.wineType]\n          );\n          \n          // Check if any of the selected types match the tasting's wine types\n          return selectedTypes.some(selectedType => \n            tasting.wine_types.some(wineType => {\n              // Normalize both strings for comparison\n              const normalizedSelected = selectedType.toLowerCase().trim();\n              const normalizedWineType = wineType.toLowerCase().trim();\n              return normalizedSelected === normalizedWineType;\n            })\n          );\n        });\n      });\n    }\n\n    // Filter by AVA\n    if (filters.ava.length > 0) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting is in the selected AVA\n        return winery.tasting_info.some(tasting => \n          tasting.ava && filters.ava.includes(tasting.ava)\n        );\n      });\n    }\n\n    // Filter by available time\n    if (filters.time) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting has the required time\n        return winery.tasting_info.some(tasting => {\n          if (!tasting.available_times || !Array.isArray(tasting.available_times)) return false;\n          \n          return tasting.available_times.some((time) => filters.time.toLowerCase() === time.toLowerCase());\n        });\n      });\n    }\n\n    // Filter by special features\n    if (filters.specialFeatures.length > 0) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting has all the required special features\n        return winery.tasting_info.some(tasting => {\n          if (!tasting.special_features || !Array.isArray(tasting.special_features)) return false;\n          \n          return filters.specialFeatures.every((feature) => tasting.special_features.includes(feature));\n        });\n      });\n    }\n\n    // Filter by multiple tastings availability\n    if (filters.multipleTastings) {\n      filtered = filtered.filter((winery) => \n        winery.tasting_info && winery.tasting_info.length > 1\n      );\n    }\n\n    // Filter by food pairings availability\n    if (filters.foodPairings) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting has food pairings\n        return winery.tasting_info.some(tasting =>\n          tasting.food_pairing_options && tasting.food_pairing_options.length > 0\n        );\n      });\n    }\n\n    // Filter by tour availability\n    if (filters.toursAvailable) {\n      filtered = filtered.filter((winery) => {\n        if (!winery.tasting_info || winery.tasting_info.length === 0) return false;\n        \n        // Check if any tasting has tours available\n        return winery.tasting_info.some(tasting =>\n          tasting.tours && tasting.tours.available\n        );\n      });\n    }\n\n    console.log('Filtered results:', filtered.length, 'wineries');\n    onFilterApply(filtered);\n    setIsLoading(false);\n  }, [filters, wineries, onFilterApply]);\n\n  useEffect(() => {\n    applyFilters();\n  }, [filters, applyFilters]);\n\n  const handleFilterChange = (key: string, value: any) => {\n    setFilters({ ...filters, [key]: value });\n  };\n\n  const handleSpecialFeatureChange = (feature: string, checked: boolean) => {\n    if (checked) {\n      filters.specialFeatures.push(feature);\n    } else {\n      const index = filters.specialFeatures.findIndex((spf) => spf === feature);\n      filters.specialFeatures.splice(index, 1);\n    }\n    setFilters({ ...filters, specialFeatures: [...filters.specialFeatures] });\n  };\n\n  const resetFilters = () => {\n    setFilters({\n      priceRange: [0, 1000],\n      numberOfWines: [1, 10],\n      wineType: { red: false, rosé: false, white: false, sparkling: false, dessert: false },\n      ava: [],\n      time: \"\",\n      specialFeatures: [],\n      numberOfPeople: [1, 20],\n      toursAvailable: false,\n      tastingPrice: 200,\n      multipleTastings: false,\n      foodPairings: false\n    });\n    setShowResetModal(false);\n  };\n\n  const [isBottomSheetOpen, setBottomSheetOpen] = useState(false);\n  return (\n    <>\n      <div className=\"md:hidden flex flex-row gap-2 w-full\">\n        <button\n          className=\"flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-all duration-300 ease-in-out bg-primary text-white shadow-glassmorphism text-sm\"\n          onClick={() => setBottomSheetOpen(true)}\n          disabled={isLoading}\n          aria-label=\"Apply Filters\"\n        >\n          <span className=\"font-medium\">Apply Filters</span>\n          <FilterIcon size={20} />\n        </button>\n\n        <button\n          className=\"flex-3 flex items-center justify-center space-x-2 px-4 py-2 rounded-md border border-wine-primary text-wine-primary bg-transparent hover:bg-wine-primary hover:text-white hover:shadow-neumorphism transition duration-300 ease-in-out text-sm\"\n          onClick={() => setShowResetModal(true)}\n          aria-label=\"Reset Filters\"\n        >\n          <MdRestore size={20} />\n          <span className=\"font-medium\">Reset</span>\n        </button>\n      </div>\n\n      <BottomSheet isOpen={isBottomSheetOpen} onClose={() => setBottomSheetOpen(false)}>\n        <FilterBlock\n          filters={filters}\n          handleFilterChange={handleFilterChange}\n          handleSpecialFeatureChange={handleSpecialFeatureChange}\n          isFeaturesOpen={isFeaturesOpen}\n          setIsFeaturesOpen={setIsFeaturesOpen}\n        />\n      </BottomSheet>\n      <div className=\"hidden md:block p-4 bg-white shadow-lg rounded-lg w-full max-w-sm sm:max-w-md space-y-4 md:space-y-6\">\n        <h2 className=\"text-lg font-semibold text-gray-800\">Filter Wineries</h2>\n        <FilterBlock\n          filters={filters}\n          handleFilterChange={handleFilterChange}\n          handleSpecialFeatureChange={handleSpecialFeatureChange}\n          isFeaturesOpen={isFeaturesOpen}\n          setIsFeaturesOpen={setIsFeaturesOpen}\n        />\n\n        {/* Tasting Price Range Filter */}\n        <div className=\"space-y-4\">\n          <label className=\"text-lg font-medium text-neutral\">Price Range of Tasting</label>\n          <div className=\"relative\">\n            <input\n              type=\"range\"\n              name=\"tastingPrice\"\n              min=\"0\"\n              max=\"200\"\n              value={filters.tastingPrice || 200}\n              onChange={(e) => handleFilterChange({ target: { name: e.target.name, value: Number(e.target.value) } })}\n              className=\"range range-primary w-full\"\n              aria-label=\"Select tasting price range\"\n            />\n          </div>\n        </div>\n\n        <button\n          className=\"flex-3 w-full flex items-center justify-center space-x-2 px-4 py-2 rounded-md border border-wine-primary text-wine-primary bg-transparent hover:bg-wine-primary hover:text-white hover:shadow-neumorphism transition duration-300 ease-in-out text-sm\"\n          onClick={() => setShowResetModal(true)}\n          aria-label=\"Reset Filters\"\n        >\n          <MdRestore size={20} />\n          <span className=\"font-medium\">Reset</span>\n        </button>\n      </div>\n\n      {showResetModal && (\n        <div className=\"fixed inset-0 flex items-center justify-center z-50\">\n          <div className=\"modal modal-open\">\n            <div className=\"modal-box p-4 max-w-md bg-white rounded-lg shadow-lg\">\n              <h2 className=\"text-lg font-semibold\">Are you sure?</h2>\n              <p className=\"text-gray-500 mt-2 text-sm\">This will reset all the filters.</p>\n              <div className=\"modal-action space-x-3\">\n                <button className=\"btn btn-ghost text-xs hover:bg-gray-200\" onClick={() => setShowResetModal(false)}>\n                  Cancel\n                </button>\n                <button className=\"btn btn-primary text-xs hover:bg-indigo-500\" onClick={resetFilters}>\n                  Reset\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {isLoading && (\n        <div className=\"mt-4 space-y-2\">\n          <div className=\"w-full h-4 bg-neutral-200 rounded animate-pulse\"></div>\n          <div className=\"w-full h-4 bg-neutral-200 rounded animate-pulse\"></div>\n          <div className=\"w-full h-4 bg-neutral-200 rounded animate-pulse\"></div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Filter;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1657, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1663, "column": 0}, "map": {"version":3,"sources":["file://E%3A/nvm/src/app/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport AuthModal from \"@/components/modal/AuthModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { useItinerary } from \"@/store/itinerary\";\r\nimport { Winery } from \"./interfaces\";\r\nimport WineryCard from \"@/components/cards/winnery-list\";\r\nimport Filter from \"@/components/filter-bar/filter-box\";\r\nimport { SessionStorageService } from \"@/lib/localstorage.config\";\r\nimport { useAuthStore } from \"@/store/authStore\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Home() {\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const { itinerary, setItinerary } = useItinerary();\r\n  const { user, loading } = useAuthStore();\r\n  const [filteredWineries, setFilteredWineries] = useState<Winery[]>([]);\r\n  const [wineries, setWineries] = useState<Winery[]>([]);\r\n\r\n  const fetchWineries = async () => {\r\n    const response = await axios.get(\"/api/winery\");\r\n    const wineriesData = response.data.wineries;\r\n    \r\n    // Migrate old payment_method format to new format for all wineries\r\n    const migratedWineries = wineriesData.map((winery: any) => {\r\n      if (typeof winery.payment_method === 'string') {\r\n        winery.payment_method = { \r\n          type: winery.payment_method,\r\n          external_booking_link: ''\r\n        };\r\n      }\r\n      return winery;\r\n    });\r\n    \r\n    setWineries(migratedWineries);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchWineries();\r\n  }, []);\r\n\r\n  const addToItinerary = (winery: any) => {\r\n    setItinerary([...itinerary, winery]);\r\n    toast.success(`${winery.name} added to your itinerary!`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      const config = SessionStorageService.getConfig();\r\n      if (config && config.isGuest) return setShowPopup(false);\r\n      if (user) return setShowPopup(false);\r\n      setShowPopup(true);\r\n    }\r\n  }, [loading]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen relative md:top-20 top-[50px] bg-gray-100\">\r\n      {showPopup && <AuthModal setShowPopup={setShowPopup} />}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 p-4 max-w-[1600px] mx-auto\">\r\n        <div className=\"lg:col-span-1 sm:col-span-1 mb-10\">\r\n          <Filter wineries={wineries} onFilterApply={setFilteredWineries} />\r\n        </div>\r\n\r\n        <div className=\"col-span-3 space-y-6 lg:ml-10 mb-20\">\r\n          {filteredWineries.length === 0 ? (\r\n            <p className=\"text-center text-lg text-gray-600\">No wineries match your filters</p>\r\n          ) : (\r\n            filteredWineries.map((winery, index) => <WineryCard key={index} winery={winery} addToItinerary={addToItinerary} />)\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;;;AAXA;;;;;;;;;;;AAae,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,eAAY,AAAD;IAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,eAAY,AAAD;IACrC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAErD,MAAM,gBAAgB;QACpB,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC;QACjC,MAAM,eAAe,SAAS,IAAI,CAAC,QAAQ;QAE3C,mEAAmE;QACnE,MAAM,mBAAmB,aAAa,GAAG,CAAC,CAAC;YACzC,IAAI,OAAO,OAAO,cAAc,KAAK,UAAU;gBAC7C,OAAO,cAAc,GAAG;oBACtB,MAAM,OAAO,cAAc;oBAC3B,uBAAuB;gBACzB;YACF;YACA,OAAO;QACT;QAEA,YAAY;IACd;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR;QACF;yBAAG,EAAE;IAEL,MAAM,iBAAiB,CAAC;QACtB,aAAa;eAAI;YAAW;SAAO;QACnC,sJAAA,CAAA,QAAK,CAAC,OAAO,CAAC,GAAG,OAAO,IAAI,CAAC,yBAAyB,CAAC;IACzD;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,IAAI,CAAC,SAAS;gBACZ,MAAM,SAAS,uIAAA,CAAA,wBAAqB,CAAC,SAAS;gBAC9C,IAAI,UAAU,OAAO,OAAO,EAAE,OAAO,aAAa;gBAClD,IAAI,MAAM,OAAO,aAAa;gBAC9B,aAAa;YACf;QACF;yBAAG;QAAC;KAAQ;IAEZ,qBACE,6LAAC;QAAI,WAAU;;YACZ,2BAAa,6LAAC,2IAAA,CAAA,UAAS;gBAAC,cAAc;;;;;;0BACvC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,uJAAA,CAAA,UAAM;4BAAC,UAAU;4BAAU,eAAe;;;;;;;;;;;kCAG7C,6LAAC;wBAAI,WAAU;kCACZ,iBAAiB,MAAM,KAAK,kBAC3B,6LAAC;4BAAE,WAAU;sCAAoC;;;;;mCAEjD,iBAAiB,GAAG,CAAC,CAAC,QAAQ,sBAAU,6LAAC,iJAAA,CAAA,UAAU;gCAAa,QAAQ;gCAAQ,gBAAgB;+BAAvC;;;;;;;;;;;;;;;;;;;;;;AAMrE;GA7DwB;;QAEc,6HAAA,CAAA,eAAY;QACtB,4HAAA,CAAA,eAAY;;;KAHhB"}},
    {"offset": {"line": 1810, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}